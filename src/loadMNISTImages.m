function images = loadMNISTImages(filename)
    % 1. Открываем файл
    % 'r' - read (чтение)
    % 'b' - Big-Endian (важно для MNIST!)
    fid = fopen(filename, 'r', 'b');
    
    if fid == -1
        error('Не удалось открыть файл! Проверь имя и путь.');
    end
    
    % 2. Читаем Заголовок (Header)
    % fread читает сырые байты и превращает их в числа
    magicNumber = fread(fid, 1, 'int32'); 
    if magicNumber ~= 2051 
        error('Это не файл картинок MNIST! Неверное магическое число.');
    end
    
    numImages = fread(fid, 1, 'int32'); % Читаем кол-во картинок (60 000)
    numRows   = fread(fid, 1, 'int32'); % Читаем высоту (28)
    numCols   = fread(fid, 1, 'int32'); % Читаем ширину (28)
    
    % 3. Читаем Пиксели
    % inf означает "читать до самого конца файла"
    % 'unsigned char' означает "читать по 1 байту" (0-255)
    images = fread(fid, inf, 'unsigned char');
    
    % Закрываем файл (хороший тон)
    fclose(fid);
    
    % 4. Превращаем колбасу байт в нормальные картинки
    
    % Сейчас images - это просто длинный вектор-столбец.
    % Сначала режем его на куски по 28x28.
    % Порядок измерений в reshape: [Колонки, Строки, Количество]
    images = reshape(images, numCols, numRows, numImages);
    
    % 5. Поворот (Permute)
    % ВАЖНЫЙ МОМЕНТ:
    % MATLAB заполняет матрицы по столбцам (сверху-вниз), а данные записаны по строкам (слева-направо).
    % Из-за этого картинки получаются повернутыми на 90 градусов и отзеркаленными.
    % permute([2 1 3]) меняет местами 1-е и 2-е измерение (строки и столбцы).
    images = permute(images, [2 1 3]);
    
    % 6. Нормализация
    % Нейросети любят числа от 0 до 1, а не от 0 до 255.
    % Делим на 255, чтобы перевести в диапазон [0, 1].
    images = double(images) / 255;
    
    % 7. Финальная подготовка для Перцептрона
    % Перцептрон не умеет смотреть на "квадрат". Ему нужен длинный вектор.
    % Превращаем каждую картинку 28x28 в вектор 784.
    % Результат: Матрица [784 x 60000]
    images = reshape(images, numRows * numCols, numImages);
end